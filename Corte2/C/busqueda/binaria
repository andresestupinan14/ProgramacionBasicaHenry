#include <stdio.h>

void selectionSort(int arr[], int n) {
    int i, j, minIndex, temp;

    for (i = 0; i < n - 1; i++) {
        minIndex = i;  
        for (j = i + 1; j < n; j++) {
            if (arr[j] < arr[minIndex]) {
                minIndex = j;
            }
        }

    
        if (minIndex != i) {
            temp = arr[i];
            arr[i] = arr[minIndex];
            arr[minIndex] = temp;
        }
    }
}

void printArray(int arr[], int n) {
    for (int i = 0; i < n; i++)
        printf("%d ", arr[i]);
    printf("\n");
}



int firstOccurrence(int arr[], int n, int key) {
    int low = 0;
    int high = n - 1;
    int result = -1;  

    while (low <= high) {
        int mid = (low + high) / 2;

        if (arr[mid] == key) {
            result = mid;        
            high = mid - 1;     
        } else if (key < arr[mid]) {
            high = mid - 1;      
        } else {
            low = mid + 1;      
        }
    }

    return result;
}

int lastOccurrence(int arr[], int n, int key) {
    int low = 0;
    int high = n - 1;
    int result = -1;  
    while (low <= high) {
        int mid = (low + high) / 2;

        if (arr[mid] == key) {
            result = mid;        
            low = mid + 1;     
        } else if (key < arr[mid]) {
            high = mid - 1;      
        } else {
            low = mid + 1;      
        }
    }

    return result;
}

int main(void) {
  
  int n;
		printf("tamaÃ±o del arreglo\n");
		scanf("%d",&n);
	    int arr[n];
	    for(int i=0;i<n;i++) {
    		printf("valor del vector en posicion %d\n",i);
    		scanf("%d",&arr[i]);
		}

   
   
    	n = sizeof(arr) / sizeof(arr[0]);


    printf("Arreglo original:\n");
    printArray(arr, n);

    selectionSort(arr, n);

    printf("Arreglo ordenado:\n");
    printArray(arr, n);
  

    int key;

    printf("Arreglo (ordenado): ");
    for (int i = 0; i < n; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");

    printf("Ingrese el numero a buscar: ");
    scanf("%d", &key);

    int first = firstOccurrence(arr, n, key);
    int last  = lastOccurrence(arr, n, key);

    if (first == -1) {
        printf("El numero %d NO se encuentra en el arreglo.\n", key);
    } else {
        int count = last - first + 1;

        printf("El numero %d aparece %d veces.\n", key, count);
        printf("Posiciones (indices 0-based): ");

        for (int i = first; i <= last; i++) {
            printf("%d ", i);
        }
        printf("\n");
    }

    return 0;
}
